<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>22 Queries - Dendron</title>
  

  <link
    rel="shortcut icon"
    href="https://wiki.dendron.so/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://wiki.dendron.so/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://wiki.dendron.so/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://wiki.dendron.so/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
   
  
<meta name="description" content="Dendron is a local-first, markdown based, hierarchical note taking tool. It is meant to help you create, organize, and collaborate on knowledge bases of any size.">
<meta name="author" content="dendronhq">

<link rel="canonical" href="https://wiki.dendron.so/notes/O4f9yfDoO7E7gRRDeBeCh.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://wiki.dendron.so/notes/O4f9yfDoO7E7gRRDeBeCh.html">
<meta property="og:description" content="Dendron is a local-first, markdown based, hierarchical note taking tool. It is meant to help you create, organize, and collaborate on knowledge bases of any size.">
<meta property="og:image" content="https://wiki.dendron.so/logo.png">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@dendronhq">
<meta name="twitter:url" content="https://wiki.dendron.so/notes/O4f9yfDoO7E7gRRDeBeCh.html">
<meta name="twitter:description" content="Dendron is a local-first, markdown based, hierarchical note taking tool. It is meant to help you create, organize, and collaborate on knowledge bases of any size.">
<meta name="twitter:image" content="https://wiki.dendron.so/logo.png">


  <meta property="og:title" content="22 Queries - Dendron" />
  <meta name="twitter:title" content="22 Queries - Dendron" />
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B0JN2HHCNY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-B0JN2HHCNY');
  </script>
  
</head>



<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://wiki.dendron.so" class="site-title lh-tight">
  <div class="site-logo"></div>

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        ðŸŒ± with ðŸ’• using <a href="https://www.dendron.so/"> Dendron ðŸŒ² </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Dendron" aria-label="Search Dendron" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://wiki.dendron.so">Dendron</a></li><li class="breadcrumb-nav-list-item"><a href="https://wiki.dendron.so/notes/f143ca38-dcc6-4cd3-b84b-997aec1160ef.html">Rfc</a></li><li class="breadcrumb-nav-list-item">22 Queries</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        
        

        

        

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="22 Queries">
    
    <meta itemprop="datePublished" content="2021-08-19T17:53:44+00:00">
    <meta itemprop="dateModified" content="2021-09-15T05:38:15+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="22-queries"><a aria-hidden="true" class="anchor-heading" href="#22-queries"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>22 Queries</h1>
<p>Queries allow you to explore your knowledge base and answer questions efficiently.</p>
<h2 id="goals"><a aria-hidden="true" class="anchor-heading" href="#goals"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Goals</h2>
<ul>
<li>An easy-to-use query language should allow users to query their knowledge base. The query language should allow complex queries when needed.</li>
<li>The editor should provide completions, warnings, and preview to provide immediate feedback when writing queries.</li>
<li>Query results should be displayed in the preview, published pages, and if possible within the editor itself.</li>
</ul>
<h2 id="context"><a aria-hidden="true" class="anchor-heading" href="#context"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Context</h2>
<p>While Dendron lets users store and organize knowledge efficiently, extracting
knowledge from Dendron is currently not as easy. Users can follow links and
backlinks to discover related notes, use the graph view to see the interactions
between notes, and use the built-in VSCode search to look for keywords.</p>
<p>All of these options are limited in their capability, and must be done manually.
They can be time consuming and prone to mistakes. They also waste work: over
time the information extracted becomes stale and the user must search through
their notes again.</p>
<h2 id="proposal"><a aria-hidden="true" class="anchor-heading" href="#proposal"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Proposal</h2>
<p>To make extracting information from Dendron streamlined and efficient, we can
add a query system to Dendron. This will allow users to search for information
in their knowledge base efficiently, and share this knowledge with others.</p>
<p>By writing a query, the user can find all notes that fit certain criteria,
answering a question that they had. The query is embedded into a note, and gets
published along with the note. This allows the user to share the results of the
query, and the results are always up-to-date as they are generated
automatically.</p>
<h2 id="details"><a aria-hidden="true" class="anchor-heading" href="#details"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Details</h2>
<p>The following section describes proposes how queries work using some examples.</p>
<h3 id="query-references"><a aria-hidden="true" class="anchor-heading" href="#query-references"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Query References</h3>
<p>The syntax for queries will be similar to references, but using a question mark instead.</p>
<pre><code>?[[ ... ]]
</code></pre>
<h3 id="query-language-definition"><a aria-hidden="true" class="anchor-heading" href="#query-language-definition"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Query language definition</h3>
<p>The language is defined as follows.</p>
<pre><code>&#x3C;Expr> -> ( &#x3C;Expr> )
&#x3C;MultiExpr> -> &#x3C;Expr> &#x3C;MultiExpr> | &#x3C;Expr>
&#x3C;Expr> -> or &#x3C;MultiExpr>
&#x3C;Expr> -> and &#x3C;MultiExpr>
&#x3C;Expr> -> &#x3C;FName>
&#x3C;Expr> -> #&#x3C;TagName>
&#x3C;Expr> -> @&#x3C;TagName>
&#x3C;Expr> -> link &#x3C;Expr>
&#x3C;Expr> -> to &#x3C;Expr>
&#x3C;Expr> -> from &#x3C;Expr>
&#x3C;Expr> -> connected &#x3C;Expr>
&#x3C;Expr> -> children &#x3C;Expr>
&#x3C;Expr> -> parent &#x3C;Expr>
&#x3C;Expr> -> descendants &#x3C;Expr>
&#x3C;Expr> -> ancestors &#x3C;Expr>
&#x3C;Expr> -> vault &#x3C;VaultName>
&#x3C;Expr> -> .&#x3C;Property> &#x3C;Relation> &#x3C;Value>
&#x3C;Value> -> &#x3C;Constant> | ?&#x3C;VariableName> | null
&#x3C;Relation> -> == | !== | > | >= | &#x3C; | &#x3C;=

&#x3C;VariableName> -> /* One or more letters or digits. */
&#x3C;Constant> -> /* A string or number. */
&#x3C;FName> -> /* A valid note name */
&#x3C;TagName> -> /* A valid hashtag or user tag name */
&#x3C;VaultName> -> /* A valid vault name */
</code></pre>
<p>In this definition, tokens surrounded by less than and greater than symbols like
<code>&#x3C;X></code> refers to a non-terminal token, and any other tokens refer to terminal
tokens.</p>
<p>Several terminal tokens are defined loosely in natural language at the end. These definitions are implementation-dependent.</p>
<p>Every expression in the query language represents a set of notes.</p>
<h2 id="examples"><a aria-hidden="true" class="anchor-heading" href="#examples"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Examples</h2>
<p>Select this RFC:</p>
<pre><code>?[[ dendron.rfc.22-queries ]]
</code></pre>
<p>Select all RFCs:</p>
<pre><code>?[[ children dendron.rfc ]]
</code></pre>
<p>Notes that are tagged with <code>#todo</code>:</p>
<pre><code>?[[ to tags.todo ]]
</code></pre>
<p>Parenthesis are optional at the top level of the queries. The following two queries are identical:</p>
<pre><code>?[[ to tags.todo ]]
?[[ (to tags.todo) ]]
</code></pre>
<p>RFCs that are tagged with <code>#todo</code>:</p>
<pre><code>?[[ and (link tags.todo) (children dendron.rfc) ]]
</code></pre>
<p>RFCs that are in the <code>dendron.dendron-site</code> vault:</p>
<pre><code>?[[ and (vault dendron.dendron-site) (children dendron.rfc) ]]
</code></pre>
<p>All notes created before a certain time:</p>
<pre><code>?[[ .created &#x3C; 1629395624110 ]]
</code></pre>
<p>All tags that have a color set:</p>
<pre><code>?[[ and (.color != null) (descendants tags) ]]
</code></pre>
<p>Queries may span multiple lines. For example, all RFCs that are tagged with <code>#todo</code> and are connected to a project:</p>
<pre><code>?[[ or (to tags.todo)
       (children dendron.rfc)
       (connected (children projects))
]]
</code></pre>
<p>Find all notes that are tagged with any tag:</p>
<pre><code>?[[ to (descendants tags) ]]
</code></pre>
<h2 id="tradeoffs"><a aria-hidden="true" class="anchor-heading" href="#tradeoffs"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Tradeoffs</h2>
<p>Pros:</p>
<ul>
<li>Using a custom query language allows us to tailor it to Dendron. Users can write compact, efficient queries, and we can provide more immediate feedback.</li>
<li>Lisp-like syntax is similar to Roam queries, and will be familiar to lisp users.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Building a custom query language requires more work, compared to something like allowing users to write queries in javascript.</li>
<li>Lisp-like syntax may be confusing for users who are not familiar with lisp languages.</li>
</ul>
<h2 id="notes"><a aria-hidden="true" class="anchor-heading" href="#notes"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Notes</h2>
<p>The implementation will be internally based on
<a href="https://github.com/tonsky/datascript">DataScript</a>, which will allow us to
support very powerful queries while also simplifying the implementation.</p>
<h2 id="discussion"><a aria-hidden="true" class="anchor-heading" href="#discussion"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Discussion</h2>
<p>Please send any suggestions, thoughts, questions or concerns to the <a href="https://github.com/dendronhq/dendron/discussions/1284">Discussions</a> page.</p>
<hr>
<h2 id="backlinks"><a aria-hidden="true" class="anchor-heading" href="#backlinks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Backlinks</h2>
<ul>
<li><a href="https://wiki.dendron.so/notes/aURuqCucZegsCpJSb5m90.html">Release Notes (version 0.59)</a></li>
</ul><span id="navId" data="O4f9yfDoO7E7gRRDeBeCh"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>

        <div class="thumbs feedback_trigger right-bottom"></div>

        
          <hr>
          <footer>
            
            

            
              <div class="d-flex mt-2">
              <p class="text-small text-grey-dk-000 mb-0 mr-2">
                Page last modified: <span class="d-inline-block">9/15/2021</span>.
              </p>
            
                
                  <p class="text-small text-grey-dk-000 mb-0">
                    <a href="https://github.com/dendronhq/dendron-site/edit/master/vault/dendron.rfc.22-queries.md" id="edit-this-page">Edit this page on GitHub</a>
                  </p>
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>

</body>
</html>
