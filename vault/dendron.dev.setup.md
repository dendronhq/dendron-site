---
id: 64f0e2d5-2c83-43df-9144-40f2c68935aa
title: Setup
desc: ''
updated: 1622227271640
created: 1598651458825
---

## Getting Started

### 1. Requirements

Before you begin, you need to make sure to have the following SDKs and tools:

- [Node.js >= 12.0.0](https://nodejs.org/download/release/latest-v10.x/)
  - We recommend using a version in [Active LTS](https://nodejs.org/en/about/releases/)
- yarn
  - `npm install -g yarn`
- lerna
  - `npm install -g lerna`
- a different instance of VSCode
  - because debugging VSCode by default loads up all extensions that are installed, you'll have issues trying to develop Dendron if you also have VSCode installed . the workaround is to install an alternative flavor of vscode (eg. [insider edition](https://code.visualstudio.com/insiders/)) to use for development 

### 2. Clone and npm install

```bash
git clone https://github.com/dendronhq/dendron.git
cd dendron
yarn
```

### 3. Build Repo

- you should run this when building dendron for the first time and also every time you run a git pull
  - new dependencies might have been picked up between pulls and this makes sure that they are installed

```bash
yarn bootstrap:bootstrap
yarn bootstrap:build 
```

- we recommend you use `vscode` to develop for dendron. there is a `dendron.code-workspace` file in the root of the monorepo that you should use when developing

### 4. Editing (the plugin)

At the root of the monorepo, open `dendron-main.code-workspace`. Open this with VSCode to start editing. While its not required to use VSCode, most of the helper scripts in this repository are created with VSCode in mind so using it will make development significantly easier.

### 5. Start Debugging (the plugin)

- NOTE: you don't need to do this if you are not directly working on the extension (eg. you're working on the [[server|pro.dendron-next-server]])

To start an instance of the Dendron with the Debugger, Run `Extension (plugin-core)` from the debug panel in vscode

![debugger](/assets/images/start_debugger.gif)

_Note: Running via Run -> Start Debugging will not work unless you've previously targeted `Extension (plugin-core)`_

### 6. Remote Development (optional)

If you are developing Dendron in a remote environment using VSCode, see additional instructions [[here|dendron.dev.remote]].

## Updating

When you are merging new changes, note that new dependencies and sometimes packages will be installed. 

### New Dependencies
```sh
# install all new dependencies
lerna bootstrap
```

### New Packages
Adding new packages is a rarer event but might require a workspace rebuild

```sh
# clean up old files (this might take a few minutes)
./bootscrap/scripts/cleanup.sh

# install all dependencies
lerna bootstrap

# build all dependencies
./bootscrap/scripts/build.sh
```

## Working with the API Server

Dendron connects to a local express server which is responsible for indexing your notes. This express server also serves up static files generated by [[Dendron Next Server|pro.dendron-next-server]]. 

Dendron compiles the static assets from the next server to the express server during publication so that everything is bundled when published. When you are developing, you can launch the next server independently for faster development. You can follow the instructions [[here|pro.dendron-next-server.quickstart]] to start the next-server.

To start Dendron with the next server active, you can set the following value in `dendron.yml`

```yml
dev:
  nextServerUrl: "http://localhost:3000"
```

## Working with the CLI

Symlink `dendron` 

```sh
cd packages/dendorn-cli
npm link

npm link -g @dendronhq/dendron-cli
```

## Working with Verdaccio

[Verdaccio](https://verdaccio.org/) is an open source local NPM registry. We use it to test out publishing and link together projects internally before publishing

```
npm install -g verdaccio
```

- switch to local npm
```sh
# source helpers 
. bootstrap/scripts/helpers.sh
# change registry to local endpoint
setRegLocal
# run local endpoint
verdaccio
```

- create a user
```sh
npm login {user}
# follow login instructions
# this allows you to run `npm publish`
CTRL+C
```


- NOTE: only run verdaccio when you need to test publishing. otherwise, this will pollute the `yarn.lock` file with `localhost` entries which will fail in CI/CD

```sh
# switch back to remote endpoint
setRegRemote
```

## Publishing Packages Locally

After you setup a local npm registry, you can run the following commands to publish locally

```sh
lerna publish from-package --ignore-scripts
# updates meta.json with latest package versions
node bootstrap/scripts/genMeta.js
```

## Linking all Packages

This goes over symlinking all packages locally. This requires that the `meta.json` file be generated. It is created as part of `yarn lerna:bootstrap`.

```sh
node bootstrap/scripts/linkAll.js
```

## Tips

### Watch Monorepo

To continuously compile all dependencies, run the following

```bash
./bootstrap/scripts/watch.sh
```

## Troubleshooting

### Something went wrong during the build

In case something something goes wrong with a build step or you want to save time by not running everything, `init.sh` is just a thin wrapper around the following scripts, each of which can be run individually

- ./bootstrap/scripts/bootstrap.sh: `lerna bootstrap all packages`
- ./bootstrap/scripts/build.sh: `lerna build all packages`

### Changes not showing up in Dendron

1. Are you using the `Run extension` command on the debugger panel to test dendron? 

2. If you have one vscode instance which you have dendron installed and are also doing dendron development on, you might get a version conflict. in that case, use `Run extension with plugin disabled` in the debugger panel (or use a different version of vscode to run dendron vs develop)

### Husky Hooks not running

Make sure you run `yarn` at the root of your workspace 